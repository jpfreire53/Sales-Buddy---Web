{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nconst useEditUser = id => {\n  _s();\n  const [openModal, setOpenModal] = useState(false);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [userData, setUserData] = useState({\n    user: \"\",\n    name: \"\",\n    company: \"\",\n    cnpj: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const response = await fetch(`http://localhost:3000/user/${id}`, {\n          method: \"GET\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        if (response.ok) {\n          const userFromApi = await response.json();\n          setUserData(userFromApi[0]);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchUserData();\n  }, [id]);\n  const handleSaveChanges = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`http://localhost:3000/edituser/${id}`, {\n        method: \"PUT\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(userData)\n      });\n      if (userData.user === null || userData.user === \"\" || userData.name === null || userData.name === \"\" || userData.company === null || userData.company === \"\" || userData.cnpj === \"\" || userData.cnpj === null) {\n        toast.error(\"Preencha os campos para realizar a alteração no usuário!\");\n      } else if (response.ok) {\n        window.location.href = \"/home/user\";\n        toast.success(\"Alterações salvas com sucesso!\");\n      } else {\n        toast.error(\"Erro ao salvar as alterações. Verifique os dados e tente novamente.\");\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    openModal,\n    setOpenModal,\n    newPassword,\n    setNewPassword,\n    windowWidth,\n    userData,\n    setUserData,\n    loading,\n    handleSaveChanges\n  };\n};\n_s(useEditUser, \"HdxM67BEkfDEV5M2qx+mvZWvz9k=\");\nexport default useEditUser;","map":{"version":3,"names":["useState","useEffect","toast","useEditUser","id","_s","openModal","setOpenModal","newPassword","setNewPassword","windowWidth","setWindowWidth","window","innerWidth","userData","setUserData","user","name","company","cnpj","loading","setLoading","handleResize","addEventListener","removeEventListener","fetchUserData","response","fetch","method","credentials","headers","ok","userFromApi","json","error","console","handleSaveChanges","body","JSON","stringify","location","href","success"],"sources":["C:/Users/joaop/OneDrive/Área de Trabalho/Estudo React/Sales Buddy/WEB/web/src/hooks/useEditUser.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst useEditUser = (id) => {\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n  const [userData, setUserData] = useState({\r\n    user: \"\",\r\n    name: \"\",\r\n    company: \"\",\r\n    cnpj: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowWidth(window.innerWidth);\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:3000/user/${id}`, {\r\n          method: \"GET\",\r\n          credentials: \"include\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const userFromApi = await response.json();\r\n          setUserData(userFromApi[0]);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n    fetchUserData();\r\n  }, [id]);\r\n\r\n  const handleSaveChanges = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const response = await fetch(`http://localhost:3000/edituser/${id}`, {\r\n        method: \"PUT\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      if (\r\n        userData.user === null ||\r\n        userData.user === \"\" ||\r\n        userData.name === null ||\r\n        userData.name === \"\" ||\r\n        userData.company === null ||\r\n        userData.company === \"\" ||\r\n        userData.cnpj === \"\" ||\r\n        userData.cnpj === null\r\n      ) {\r\n        toast.error(\"Preencha os campos para realizar a alteração no usuário!\");\r\n      } else if (response.ok) {\r\n        window.location.href = \"/home/user\";\r\n        toast.success(\"Alterações salvas com sucesso!\");\r\n      } else {\r\n        toast.error(\r\n          \"Erro ao salvar as alterações. Verifique os dados e tente novamente.\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    openModal,\r\n    setOpenModal,\r\n    newPassword,\r\n    setNewPassword,\r\n    windowWidth,\r\n    userData,\r\n    setUserData,\r\n    loading,\r\n    handleSaveChanges,\r\n  };\r\n};\r\n\r\nexport default useEditUser;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}